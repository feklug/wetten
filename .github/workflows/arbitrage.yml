name: Web Scraping und Arbitrage Überprüfung

on:
  schedule:
    - cron: '*/1 * * * *'  # Diese Cron-Expression führt den Job jede Minute aus.
  workflow_dispatch:  # Erlaubt manuelles Triggern des Workflows.

jobs:
  scraper-job:
    runs-on: ubuntu-latest  # Wählt die Umgebung (Ubuntu in diesem Fall).

    steps:
      # Schritt 1: Klone das Repository
      - name: Repository auschecken
        uses: actions/checkout@v2

      # Schritt 2: Setze Python und Installiere Abhängigkeiten
      - name: Python 3 Setup
        uses: actions/setup-python@v2
        with:
          python-version: '3.8'  # Stelle sicher, dass du Python 3.8 oder eine andere Version verwendest

      - name: Installiere Abhängigkeiten
        run: |
          pip install --upgrade pip
          pip install -r requirements.txt

      # Schritt 3: Stelle sicher, dass die Firebase Credentials vorhanden sind
      - name: Firebase credentials
        run: |
          if [ ! -f "accelerate-app-f3f90-firebase-adminsdk-mnbwy-917250e91c.json" ]; then
            echo "Firebase credentials fehlen!" && exit 1;
          fi

      # Schritt 4: Starte den Scraper
      - name: Scraping und Arbitrage
        run: |
          python3 scraper.py

